(()=>{"use strict";var e,t,o={},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e](r,r.exports,s),r.exports}s.m=o,s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,o)=>(s.f[o](e,t),t),[])),s.u=e=>e+".jxl-bundle.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="JXLEncoder:",s.l=(o,n,r,a)=>{if(e[o])e[o].push(n);else{var l,i;if(void 0!==r)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==o||c.getAttribute("data-webpack")==t+r){l=c;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+r),l.src=o),e[o]=[n];var p=(t,n)=>{l.onerror=l.onload=null,clearTimeout(f);var s=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{s.b=document.baseURI||self.location.href;var e={792:0};s.f.j=(t,o)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise((o,s)=>n=e[t]=[o,s]);o.push(n[2]=r);var a=s.p+s.u(t),l=new Error;s.l(a,o=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}},"chunk-"+t,t)}};var t=(t,o)=>{var n,r,[a,l,i]=o,d=0;if(a.some(t=>0!==e[t])){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);i&&i(s)}for(t&&t(o);d<a.length;d++)r=a[d],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0},o=this.webpackChunkJXLEncoder=this.webpackChunkJXLEncoder||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r={};s.r(r),s.d(r,{default:()=>y,encode:()=>f});const a={effort:7,quality:75,progressive:!1,epf:-1,lossyPalette:!1,decodingSpeedTier:0,photonNoiseIso:0,lossyModular:!1,lossless:!1},l=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),i=()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));function d(e,t,o={}){let n;return t&&(n=(e,o)=>{const n=new WebAssembly.Instance(t,e);return o(n),n.exports}),e({noInitialRun:!0,instantiateWasm:n,...o})}let u;const c=()=>"undefined"!=typeof process&&process.release&&"node"===process.release.name,p=()=>{var e;return void 0!==(null===(e=globalThis.caches)||void 0===e?void 0:e.default)};async function f(e,t={}){u||(u=async function(e,t){let o=e,n=t;if(1!==arguments.length||e instanceof WebAssembly.Module||(o=void 0,n=e),!c()&&!p()&&await i()){if(await l()){const e=await s.e(913).then(s.bind(s,913));return u=d(e.default,o,n),u}const e=await s.e(413).then(s.bind(s,413));return u=d(e.default,o,n),u}const r=await s.e(249).then(s.bind(s,249));return u=d(r.default,o,n),u}());const o=await u,n={...a,...t};n.lossless&&(void 0!==t.quality&&100!==t.quality&&console.warn("JXL lossless: Quality setting is ignored when lossless is enabled (quality must be 100)."),t.lossyModular&&console.warn("JXL lossless: LossyModular setting is ignored when lossless is enabled (lossyModular must be false)."),t.lossyPalette&&console.warn("JXL lossless: LossyPalette setting is ignored when lossless is enabled (lossyPalette must be false)."),n.quality=100,n.lossyModular=!1,n.lossyPalette=!1);const r=o.encode(e.data,e.width,e.height,n);if(!r)throw new Error("Encoding error.");return r.buffer}const y={async encode(e,t={}){try{console.log("[JXL Bundle] Encoding image with options:",t);const o={effort:7,quality:75,progressive:!1,epf:-1,lossyPalette:!1,decodingSpeedTier:0,photonNoiseIso:0,lossyModular:!1,lossless:!1,...t};o.lossless&&(o.quality=100,o.lossyModular=!1,o.lossyPalette=!1),console.log("[JXL Bundle] Final encoding options:",o);const n=await f(e,o);return console.log("[JXL Bundle] Encoding successful, output size:",n.byteLength),n}catch(e){throw console.error("[JXL Bundle] Encoding failed:",e),e}},isSupported:()=>!0,getVersion:()=>"webpack-bundled-@jsquash/jxl"};"undefined"!=typeof window&&(window.JXLEncoder=y),window.JXLEncoder=r})();